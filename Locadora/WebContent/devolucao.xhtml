<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<link type="text/css" rel="stylesheet"
		href="#{request.contextPath}/style/prime.css" />
	<link type="text/css" rel="stylesheet"
		href="#{request.contextPath}/style/default.css" />
	<link type="text/css" rel="stylesheet"
		href="#{request.contextPath}/style/syntaxhighlighter/syntaxhighlighter.css" />
</h:head>
<body>
	<p:layout fullPage="true">
		<h:form prependId="false">
			<p:layoutUnit position="west" size="100">
				<h:outputLink value="#{request.contextPath}/faces/cliente.xhtml">Cadastro de clientes</h:outputLink>
				<br></br>
				<br></br>
				<h:outputLink
					value="#{request.contextPath}/faces/consulta_cliente.xhtml">Consulta de clientes</h:outputLink>
				<br></br>
				<br></br>
				<h:outputLink value="#{request.contextPath}/faces/filme.xhtml">Cadastro de filmes</h:outputLink>
				<br></br>
				<br></br>
				<h:outputLink
					value="#{request.contextPath}/faces/consulta_filme.xhtml">Consulta de filmes</h:outputLink>
				<br></br>
				<br></br>
				<h:outputLink value="#{request.contextPath}/faces/fatura.xhtml">Empréstimo/Faturamento</h:outputLink>
				<br></br>
				<br></br>
				<h:outputLink value="#{request.contextPath}/faces/devolucao.xhtml">Consulta/Devolução</h:outputLink>
				<br></br>
				<br></br>
				<h:outputLink value="#{request.contextPath}/faces/rel_filmes_alugados.xhtml">Relatorio de filmes alugados</h:outputLink>
			</p:layoutUnit>
			<p:layoutUnit position="center">
				<p:dataTable id="basic" var="itemFatura"
					value="#{itemFaturaBean.itensFatura}" paginator="true" rows="5"
					rowsPerPageTemplate="5,10,15,20,25,30,35,40">
					<f:facet name="header">  
		            	Lista de filmes alugados  
		        	</f:facet>

					<p:column id="ColumIDFatura" sortBy="#{itemFatura.id_fatura}"
						filterMatchMode="contains" footerText="contains"
						headerText="Model" filterBy="#{itemFatura.id_fatura}">
						<f:facet name="header">
							ID Fatura
						</f:facet>
						<h:outputText value="#{itemFatura.id_fatura}" />
					</p:column>

					<p:column id="ColumNomeFilme" sortBy="#{itemFatura.nome_filme}"
						filterMatchMode="contains" footerText="contains"
						headerText="Model" filterBy="#{itemFatura.nome_filme}">
						<f:facet name="header">
							Nome do filme
						</f:facet>
						<h:outputText value="#{itemFatura.nome_filme}" />
					</p:column>

					<p:column id="ColumNomeCliente" sortBy="#{itemFatura.nome_cliente}"
						filterMatchMode="contains" footerText="contains"
						headerText="Model" filterBy="#{itemFatura.nome_cliente}">
						<f:facet name="header">
							Nome do cliente
						</f:facet>
						<h:outputText value="#{itemFatura.nome_cliente}" />
					</p:column>

					<p:column id="ColumPreco" sortBy="#{itemFatura.preco_filme}"
						filterMatchMode="contains" footerText="contains"
						headerText="Model" filterBy="#{itemFatura.preco_filme}">
						<f:facet name="header">
							Preço do filme
						</f:facet>
						<h:outputText value="#{itemFatura.preco_filme}">
							<f:convertNumber locale="pt_BR"/>
						</h:outputText>
					</p:column>

					<p:column id="ColumDataRetirada"
						sortBy="#{itemFatura.data_retirada}" filterMatchMode="contains"
						footerText="contains" headerText="Model"
						filterBy="#{itemFatura.data_retirada}" >
						<f:facet name="header">
							Data retirada
						</f:facet>
						<h:outputText value="#{itemFatura.data_retirada}">
							<f:convertDateTime pattern="dd/MM/yyyy"/> 
						</h:outputText>
					</p:column>

					<p:column id="ColumDataDevolucao"
						sortBy="#{itemFatura.data_devolucao}" filterMatchMode="contains"
						footerText="contains" headerText="Model"
						filterBy="#{itemFatura.data_devolucao}">
						<f:facet name="header">
							Data dev.
						</f:facet>
						<h:outputText value="#{itemFatura.data_devolucao}">
							<f:convertDateTime pattern="dd/MM/yyyy"/>
						</h:outputText>
					</p:column>

					<p:column id="ColumPagamento" sortBy="#{itemFatura.data_pagamento}"
						filterMatchMode="contains" footerText="contains"
						headerText="Model" filterBy="#{itemFatura.data_pagamento}">
						<f:facet name="header">
							Data pgto
						</f:facet>
						<h:outputText value="#{itemFatura.data_pagamento}">
							<f:convertDateTime pattern="dd/MM/yyyy"/>
						</h:outputText>
					</p:column>
					<p:column id="ColumSituacao" sortBy="#{itemFatura.desc_situacao}"
						filterMatchMode="contains" footerText="contains"
						headerText="Model" filterBy="#{itemFatura.desc_situacao}">
						<f:facet name="header">
							Situação
						</f:facet>
						<h:outputText value="#{itemFatura.desc_situacao}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Opção" />
						</f:facet>
						<h:commandButton value="X"
							actionListener="#{itemFaturaBean.remover}"
							action="devolucao.xhtml" image="../icones/delet.png">
							<f:attribute name="id_filme_alugado"
								value="#{itemFatura.id_filme_alugado}" />
						</h:commandButton>
						
						<h:commandButton value="A" actionListener="#{itemFaturaBean.alterar}"
							action="altera_status.xhtml" image="../icones/edit.png">
							<f:attribute name="id_filme_alugado" value="#{itemFatura.id_filme_alugado}"/>
							<f:attribute name="situaca_filme" value="#{itemFatura.situacao}" />
							<f:attribute name="data_pgto" value="#{itemFatura.data_pagamento}" />
						</h:commandButton>
					</p:column>
				</p:dataTable>
			</p:layoutUnit>
		</h:form>
	</p:layout>
</body>
</html>